# 单一职责原则



耦合和内聚。



一个类应该只有一个发生变化的原因。

如果一个类有多于一个的动机被改变，那么这个类就具有多于一个的职责。而单一职责原则就是指一个类或者模块应该有且只有一个改变的原因。



在编码过程中，如果你发现某个类经常因为不同的需求被改动，那基本上可以断定这个类设计上有问题。



### 粒度

* 类

* 函数

  单一职责原则虽然指的是类，但是对于函数同样适用，因为本质讲的是耦合和内聚。类应该是内聚的，函数也应该是内聚的。

一个函数就做一件事情，不要做很多奇奇怪怪的事情，这有助于避免出现超长的函数。



### 职责扩散



因为某种原因，某一职责被分化为更细的多个职责了。常见的原因，需求变更，在原有的功能基础上添加新的功能。

假设原来应用里有个录制视频的功能，只支持mp4格式，现在要添加一个webp格式的，这个时候最快的做法是添加一个 if/else



```
void saveImagesToMp4() {
		if (useWebp) {
			// create webp
		} else {
			// create mp4
		}
}
```



违反单一职责原则

* 类设计问题
* 职责扩散

有可能在创建类的时候，设计就有问题，导致违反了单一职责原则。但编码中更多的情况是发生了职责扩散。



# 开闭原则



软件中的对象应该对于扩展是开发的，但是对于修改是封闭的。

很多人喜欢修改的旧代码，让它能够完成旧的功能，同时胜任新的功能。





# 里氏替换原则



**子类可以扩展父类的功能，但不能改变父类原有的功能**

当使用继承时，遵循里氏替换原则。类B继承类A时，除添加新的方法完成新增功能P2外，尽量不要重写父类A的方法，也尽量不要重载父类A的方法。



### 里氏替换原则和多态的关系

