# block



## block 变量捕获机制



1. 全局变量，不会捕获到 block 内部，直接访问就可以了。全局变量在哪里都可以直接访问，所以 block 没有必要捕获到内部。
2. 局部变量，会捕获到 block 内部，因为不能直接访问
   * auto 类型的局部变量，（我们定义的基本类型的变量，默认就是 auto）,block 内部会自动生成一个同类型的成员变量，用来存储这个变量的值，访问方式为值传递。auto 类型的局部变量可能会销毁，其内存会消失，block 将来执行的时候不能再去访问那块内存，所以捕获其值。由于是值传递，我们修改 block 外部被捕获的变量的值，不会影响到 block 内部捕获的变量值，反之亦然。
   * static 类型的局部变量，block 内部会自动生成一个同类型成员变量，用来存储这个变量的地址，访问方式为指针传递。static 变量会一直保存在内存中，保存地址即可。由于是指针传递，我们修改 block 外部被捕获变量的值，会影响到 block 内部捕获的变量值。

